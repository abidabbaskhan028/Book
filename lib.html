<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Library App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #4CAF50;
            color: white;
            text-align: center;
            padding: 1em;
        }

        #bookList,
        #searchResults {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            padding: 1em;
        }

        .bookCard {
            border: 1px solid #ddd;
            margin: 1em;
            padding: 1em;
            width: 200px;
        }

        .bookImage {
            max-width: 100%;
            height: auto;
        }

        .statusButton {
            cursor: pointer;
            padding: 0.5em;
            margin-top: 0.5em;
            width: 100%;
            text-align: center;
            border: 1px solid #ddd;
        }

        .statusButton.green {
            background-color: #4CAF50;
            color: white;
        }
        .bookCard {
        border: 1px solid #ddd;
        margin: 1em;
        padding: 1em;
        width: calc(25% - 2em);
        box-sizing: border-box;
        transition: transform 0.2s ease-in-out;
        background-color: #f9f9f9;
        border-radius: 8px;
        overflow: hidden;
        position: relative;
    }

    .bookCard:hover {
        transform: scale(1.05);
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .bookImage {
        max-width: 100%;
        height: auto;
        border-radius: 4px;
        box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
    }

    .bookCard p {
        margin: 0.5em 0;
    }

    .statusButton {
        cursor: pointer;
        padding: 0.5em;
        margin-top: 0.5em;
        width: 100%;
        text-align: center;
        border: 1px solid #ddd;
        background-color: #4CAF50;
        color: white;
        border-radius: 4px;
        transition: background-color 0.3s ease-in-out;
    }

    .statusButton:hover {
        background-color: #45a049;
    }


    body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f8f8;
            color: #333;
        }

        header {
            background-color: #4CAF50;
            color: white;
            text-align: center;
            padding: 1em;
        }

        #homePage {
            
            margin: 2em auto;
            padding: 1em;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            text-align: center;
        }

        #searchBar {
            width: 100%;
            padding: 0.8em;
            margin-bottom: 1em;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        #bookList {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            padding: 1em;
        }

        .resultCard {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px;
        }

        .statusButton {
            background-color: #4CAF50;
            color: white;
            padding: 5px 10px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        .statusButton.green {
            background-color: #008CBA;
        }
        
    </style>
</head>

<body>
    <header>
        <h1>Book Library</h1>
    </header>

    <div id="homePage">
        <input type="text" id="searchBar" placeholder="Search for books">
        <div id="bookList"></div>
    </div>

    <div id="searchPage" style="display:none;">
        <div id="searchResults"></div>
    </div>

    <script>

        
        function fetchBooks(url) {
            return fetch(url).then(response => response.json());
        }

        function renderBookList(books) {
            const bookList = document.getElementById('bookList');
            bookList.innerHTML = '';

            books.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.classList.add('bookCard');

                const coverId = book.cover_id;
                const coverUrl = `https://covers.openlibrary.org/b/id/${coverId}-M.jpg`;

                bookCard.innerHTML = `
                    <img src="${coverUrl}" alt="Book Cover" class="bookImage">
                    <p><strong>Title:</strong> ${book.title}</p>
                    <p><strong>Author:</strong> ${book.author_name}</p>
                    <p><strong>Published Year:</strong> ${book.first_publish_year}</p>
                    <button class="statusButton ${book.read ? 'green' : ''}" onclick="toggleStatus(${book.id})">
                        ${book.read ? 'Read' : 'Unread'}
                    </button>
                `;

                bookList.appendChild(bookCard);
            });
        }

        function toggleStatus(bookId) {
            const book = books.find(b => b.id === bookId);
            book.read = !book.read;
            renderBookList(books);
        }

       

        // Fetch and render initial book list
        let books = [];
        fetchBooks('https://openlibrary.org/people/mekBot/books/already-read.json')
            .then(response => response.json())
            .then(data => {
                if (data && data.reading_log_entries) {
                    // Assuming reading_log_entries contains book information
                    books = data.reading_log_entries;
                    renderBookList(books);
                } else {
                    console.error('Invalid data format:', data);
                }
            })
            .catch(error => console.error('Error fetching books:', error));

        // Assuming this is your function to fetch books
        function fetchBooks(url) {
            return fetch(url);
        }

        // Assuming this is your function to render the book list
        function renderBookList(books) {
            const bookList = document.getElementById('bookList');
            bookList.innerHTML = '';

            books.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.classList.add('bookCard');

                const coverId = book.work.cover_id;
                const coverUrl = `https://covers.openlibrary.org/b/id/${coverId}-M.jpg`;

                bookCard.innerHTML = `
            <img src="${coverUrl}" alt="Book Cover" class="bookImage">
            <p><strong>Title:</strong> ${book.work.title}</p>
            <p><strong>Author:</strong> ${book.work.author_names.join(', ')}</p>
            <p><strong>Published Year:</strong> ${book.work.first_publish_year}</p>
            <button class="statusButton ${book.read ? 'green' : ''}" onclick="toggleStatus('${book.logged_edition}')">
                ${book.read ? 'Read' : 'Unread'}
            </button>
        `;

                bookList.appendChild(bookCard);
            });
        }

       

    function searchBooks() {
        const searchBar = document.getElementById('searchBar');
        const searchResultsContainer = document.getElementById('searchResults');

        if (searchBar && searchBar.value) {
            searchResultsContainer.innerHTML = 'Loading...';

            const searchTerm = searchBar.value.toUpperCase();
            const searchResults = books.filter(book => {
                const title = (book.work.title || '').toUpperCase();
                const authors = (book.work.author_names || []).map(author => author.toUpperCase()).join(', ');

                return title.includes(searchTerm) || authors.includes(searchTerm);
            });

            renderSearchResults(searchResults);
        } else {
            searchResultsContainer.innerHTML = '';
        }
    }

    function renderSearchResults(results) {
        const searchResultsContainer = document.getElementById('searchResults');
        searchResultsContainer.innerHTML = '';

        results.forEach(result => {
            const resultCard = document.createElement('div');
            resultCard.classList.add('resultCard');

            resultCard.innerHTML = `
                <p><strong>Title:</strong> ${result.work.title}</p>
                <p><strong>Author:</strong> ${result.work.author_names.join(', ')}</p>
                <p><strong>Published Year:</strong> ${result.work.first_publish_year}</p>
                <button class="statusButton ${result.read ? 'green' : ''}" onclick="toggleStatus('${result.logged_edition}')">
                    ${result.read ? 'Read' : 'Unread'}
                </button>
            `;

            searchResultsContainer.appendChild(resultCard);
        });
    }

    function toggleStatus(bookId) {
        const book = books.find(b => b.logged_edition === bookId);
        if (book) {
            book.read = !book.read;
            renderSearchResults(books.filter(b => b.read));
        }
    }

    document.getElementById('searchBar').addEventListener('input', searchBooks);

    </script>
</body>

</html>